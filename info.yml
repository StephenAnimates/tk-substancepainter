# Copyright (c) 2013 Shotgun Software Inc.
#
# CONFIDENTIAL AND PROPRIETARY
#
# This work is provided "AS IS" and subject to the Shotgun Pipeline Toolkit
# Source Code License included in this distribution package. See LICENSE.
# By accessing, using, copying or modifying this work you indicate your
# agreement to the Shotgun Pipeline Toolkit Source Code License. All rights
# not expressly granted therein are reserved by Shotgun Software Inc.

# Metadata defining the behaviour and requirements for this engine

# Original code by: Diego Garcia Huerta, https://www.linkedin.com/in/diegogh/
# Updated by: Stephen Studyvin

# Updated:
# September 2025, to support current Adobe Substance 3D Painter version.

# expected fields in the configuration file for this engine

configuration:

    automatic_context_switch:
        type: bool
        description: "Controls whether toolkit should attempt to automatically adjust its
                     context every time the currently loaded file changes. Defaults to True."
        default_value: True

    change_context_on_new_project:
        type: bool
        description: "Controls whether the engine is refreshed and context changed when a new
                     project is created and the path to the mesh loaded is recognized as a valid context.
                     By default is turned off, so when a new project is created right after 'New File'
                     is clicked, the context is preserved."
        default_value: False

    compatibility_dialog_min_version:
        type: int
        description: "Specify a Adobe Substance 3D Painter major version. Any version
                     greater than or equal to this value will not display a compatibility
                     warning dialog at startup. This allows studios to disable the warning for
                     versions they have tested and approved. For example, if set to 12, versions
                     11.x and below will show a warning, but 12.x and above will not."
        default_value: 13

    debug_logging: 
        type: bool
        description: Controls whether debug messages should be emitted to the logger
        default_value: false

    menu_favourites:
        type: list
        description: "Controls the favourites section on the main menu. This is a list
                     and each menu item is a dictionary with keys app_instance and name.
                     The app_instance parameter connects this entry to a particular
                     app instance defined in the environment configuration file. The name
                     is a menu name to make a favourite."
        allows_empty: True
        values:
            type: dict
            items:
                name: { type: str }
                app_instance: { type: str }

    run_at_startup:
        type: list
        description: "Controls what apps will run on startup.  This is a list where each element
                     is a dictionary with two keys: 'app_instance' and 'name'.  The app_instance
                     value connects this entry to a particular app instance defined in the
                     environment configuration file.  The name is the menu name of the command
                     to run when the Substance Painter engine starts up.  If name is '' then all commands from the
                     given app instance are started."
        allows_empty: True
        default_value: []
        values:
            type: dict
            items:
                name: { type: str }
                app_instance: { type: str }

    use_sgtk_as_menu_name:
        type: bool
        description: Optionally choose to use 'Sgtk' as the primary menu name instead of 'Shotgun'
        default_value: false

        
        type: list
        description: Comma-separated list of tk-substancepainter plugins to load when launching 
                    Adobe Substance 3D Painter. Use of this feature disables the classic mechanism
                    for bootstrapping Toolkit when Substance Painter is launched.
        allows_empty: True
        default_value: []
        values:
            type: str

# the Flow Production Tracking (ShotGrid/Shotgun) fields that this engine needs in order to operate correctly
requires_shotgun_fields:
        
# More verbose description of this item 
display_name: "Flow Production Tracking (ShotGrid/Shotgun) Engine for Adobe Substance 3D Painter"
description: "Flow Production Tracking (ShotGrid/Shotgun) Integration for Adobe Substance 3D Painter"

# Required minimum versions for this item to run
requires_shotgun_version: 
requires_core_version: "v0.22.3"

frameworks:
    - {"name": "tk-framework-shotgunutils", "version": "v5.x.x"}
    - {"name": "tk-framework-qtwidgets", "version": "v2.x.x"}